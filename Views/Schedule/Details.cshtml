@model FYP_QS_CODE.Models.Schedule
@using FYP_QS_CODE.Models
@{
    ViewData["Title"] = "Game Details";
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>@Model.GameName</h2>
    
    <a class="btn btn-outline-secondary" asp-action="Index">Back</a>

    <div class="dropdown ms-2">
        <button class="btn btn-sm btn-light border-0" type="button" id="settingsMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-gear-fill"></i>
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="settingsMenuButton">
            <li>
                <a class="dropdown-item text-primary" href="@Url.Action("Edit", "Schedule", new { id = Model.ScheduleId })">
                    ✏️ Edit Schedule
                </a>
            </li>
            <li>
                <a class="dropdown-item text-danger" href="@Url.Action("Cancel", "Schedule", new { id = Model.ScheduleId })"
                   onclick="return confirm('Are you sure you want to cancel this game?');">
                    ❌ Cancel Schedule
                </a>
            </li>
            </ul>
    </div>
</div>

<div class="row g-3">
    <div class="col-lg-8">
        <div class="card mb-3">
            <div class="card-body">
                <h5>Overview</h5>
                
                <p><strong>Type:</strong> @Model.ScheduleType</p>
                @if(Model.MinRankRestriction.HasValue || Model.MaxRankRestriction.HasValue)
                {
                    <p><strong>Rank:</strong> @(Model.MinRankRestriction?.ToString() ?? "Any") - @(Model.MaxRankRestriction?.ToString() ?? "Any")</p>
                }
                
                <p><strong>Location:</strong> @Model.Location</p>

                @if (Model.StartTime.HasValue)
                {
                    <p><strong>Date:</strong> @Model.StartTime.Value.ToString("dd/MM/yyyy dddd")</p>
                    <p><strong>Time:</strong> @Model.StartTime.Value.ToString("hh:mm tt")</p>
                }
                <p><strong>Duration:</strong> @Model.Duration.ToString()</p>

                <p><strong>Price per Player:</strong>
                    @if(Model.FeeType == FeeType.Free || Model.FeeType == FeeType.None)
                    {
                        <span>Free</span>
                    }
                    else
                    {
                        <span>RM @Model.FeeAmount (@Model.FeeType)</span>
                    }
                </p>

                <p class="text-muted">@Model.Description</p>
            </div>
        </div>

        <hr />

        </div>
</div>